!function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="/",n(0)}([function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=t(1),a=o(i);angular.module("angular-easy-voice",[]).service("EasyVoice",a.default)},function(e,n){"use strict";function t(e,n){var t=this;e.AudioContext=e.AudioContext||e.webkitAudioContext;var i={oninit:void 0,onstart:void 0,onuserphrase:void 0,onresult:void 0},a=void 0;"AudioContext"in e&&(a=new AudioContext);var r=void 0,s=void 0,c=void 0,l=void 0,d=void 0,u=void 0,f=void 0,p=void 0,g=void 0,y={speakNow:"Speak Now",notUnderstand:"Not understand.",tryAgain:"Try again.",checkMicrophone:"Please, check your microphone.",listening:"listening..."},v=void 0,h=!1,m=!0,w=void 0,b=void 0,x=void 0,k=void 0,S=void 0,C=void 0,A=void 0,L=[],F=[],M=new DOMParser,T=document.getElementsByTagName("body")[0],E=document.head||document.getElementsByTagName("head")[0],q=void 0,U='\n        <div id="angular-easy-voice-container">\n          <div style="margin-top: 10%;">\n          <button class="" id="angular-easy-voice-microphone">\n              <svg width="64" version="1.1" xmlns="http://www.w3.org/2000/svg" height="64" viewBox="0 0 64 64" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 64 64">\n                <g>\n                  <g fill="red">\n                    <path d="m43.18,37.155v-25.458c0-6.236-5.074-11.311-11.311-11.311-6.237,0-11.312,5.074-11.312,11.311v25.458c0,6.237 5.074,11.312 11.312,11.312 6.236,0 11.311-5.074 11.311-11.312zm-18.598,0v-25.458c0-4.018 3.27-7.287 7.287-7.287 4.016,0 7.285,3.27 7.285,7.287v25.458c0,4.018-3.27,7.286-7.285,7.286-4.017,0-7.287-3.268-7.287-7.286z"/>\n                    <path d="m31.869,64c1.111,0 2.011-0.9 2.011-2.012v-6.468c11.677-1.024 20.87-10.842 20.87-22.779 0-1.112-0.9-2.014-2.013-2.014s-2.013,0.901-2.013,2.014c0,10.397-8.457,18.855-18.855,18.855-10.399,0-18.857-8.458-18.857-18.855 0-1.112-0.9-2.014-2.012-2.014-1.113,0-2.014,0.901-2.014,2.014 0,11.938 9.192,21.755 20.87,22.779v6.469c-3.55271e-15,1.111 0.901,2.011 2.013,2.011z"/>\n                  </g>\n                </g>\n              </svg>\n          </div>\n          <div style="margin-top: 2%;">\n            <label id="angular-easy-voice-text"></label>\n          </div>\n        </div>\n    ',R="\n\n          #angular-easy-voice-container{\n              position: absolute;\n              left: 0;\n              top: 0;\n              width: 100%;\n              height: 100%;\n              background: #fff;\n              text-align: center;\n              z-index: 99999;\n          }\n\n          #angular-easy-voice-microphone{\n              background: transparent;\n              border: 1px solid #ccc;\n              border-radius: 62%;\n              padding: 30px;\n          }\n\n          #angular-easy-voice-text{\n              color: #777;\n              font-weight: normal;\n              font-family: arial,sans-serif;\n              line-height: 1.2;\n              transition: opacity .1s ease-in,margin-left .5s ease-in,top 0s linear 0.218s;\n              font-size: 32px;\n          }\n\n    ";if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),navigator.cancelAnimationFrame||(navigator.cancelAnimationFrame=navigator.webkitCancelAnimationFrame||navigator.mozCancelAnimationFrame),navigator.requestAnimationFrame||(navigator.requestAnimationFrame=navigator.webkitRequestAnimationFrame||navigator.mozRequestAnimationFrame),"SpeechSynthesisUtterance"in e){p=new SpeechSynthesisUtterance;var z=window.speechSynthesis.getVoices();p.lang="en-US",p.localService=!0,p.voice=z[5]}if("webkitSpeechRecognition"in e){r=new webkitSpeechRecognition,q=M.parseFromString(U,"text/html"),g=q.getElementById("angular-easy-voice-container"),v=g.querySelector("#angular-easy-voice-microphone");var N=document.createElement("style");b=g.querySelector("#angular-easy-voice-text"),N.type="text/css",N.styleSheet?N.styleSheet.cssText=R:N.appendChild(document.createTextNode(R)),E.appendChild(N),r.continuous=!1,r.interimResults=!0,r.lang="en-US",g.style.display="none",T.appendChild(g),r.onresult=function(e){void 0!=A&&(n.cancel(A),A=void 0),void 0!=S&&(n.cancel(S),S=void 0),void 0!=C&&(n.cancel(C),C=void 0),A=n(function(){b.innerHTML=y.notUnderstand+"  ";var e=document.createElement("a");e.style.fontWeight="500",e.style.cursor="pointer",e.style.fontSize="18px",e.style.color="#1155cc",e.innerHTML=y.tryAgain,e.onclick=function(e){i.startListening(),e.stopPropagation()},C=n(function(){i.stopListening()},3e3),null!=b.querySelector("#try-again")&&b.removeChild(e),b.appendChild(e)},5e3);for(var t=e.resultIndex;t<e.results.length;++t){var o=e.results[t][0].transcript;e.results[t][0].confidence<.9&&e.results[t].isFinal&&o.split(" ").forEach(function(e){var n=[];L.forEach(function(t){n.push({word:t,distance:i.similarText(t,e)})}),n=n.sort(function(e,n){return n.distance-e.distance}),n.length>0&&n[0].distance>=3&&(o=o.replace(new RegExp(e,"g"),n[0].word))}),b.innerHTML=o,k&&"function"==typeof k&&e.results[t].isFinal&&h&&k(o),x.debug&&e.results[t].isFinal&&console.info("Debug: "+o),w&&w.trim().toLowerCase()==o.trim().toLowerCase()&&!h&&e.results[t].isFinal&&n(function(){i.startListening()}),h&&e.results[t].isFinal&&F.forEach(function(e){(e.key&&e.callback&&e.watchStart&&o.toLowerCase().startsWith(e.key.toLowerCase())||e.key&&e.callback&&o.toLowerCase()==e.key.toLowerCase())&&(e.close&&i.stopListening(),e.callback(o))}),i.onresult&&"function"==typeof i.onresult&&h&&e.results[t].isFinal&&o!=w&&(void 0!=A&&(n.cancel(A),A=void 0),C=n(function(){i.stopListening()},3e3),i.onresult(o)),i.onuserphrase&&"function"==typeof i.onuserphrase&&e.results[t].isFinal&&o!=w&&(void 0!=A&&(n.cancel(A),A=void 0),C=n(function(){i.stopListening()},3e3),i.onuserphrase(o))}},r.onerror=function(e){"aborted"!=e.error&&"not-allowed"!=e.error||(m=!1,i.stopWatch(),g.onclick=function(){g.style.display="none"},b.innerHTML=y.checkMicrophone,g.style.display="block")},r.onend=function(){m&&t.initRecognition()}}return i.setTranslate=function(e){if("object"!=("undefined"==typeof e?"undefined":o(e)))throw"Translation needs to be an object.";Object.keys(e).forEach(function(n){y[n]&&(y[n]=e[n])})},i.startListening=function(){n(function(){void 0!=C&&(n.cancel(C),C=void 0),b.innerHTML=y.speakNow,h=!0,null!=T.querySelector("#angular-easy-voice-container")&&(g.style.display="none"),g.onclick=function(){i.stopListening()},S=n(function(){b.innerHTML=y.listening},3e3),i.onstart&&"function"==typeof i.onstart&&i.onstart(),g.style.display="block"})},i.stopListening=function(){h=!1,null!=T.querySelector("#angular-easy-voice-container")&&(g.style.display="none")},i.getCommands=function(){return F},i.isRunning=function(){return void 0!=u},i.initWatch=function(n,o,i){if(!("webkitSpeechRecognition"in e))throw"Sorry, this feature is only for Google Chrome.";if(!n)throw"Please enter the key phrase.";if(w)throw"Sorry, start only once.";if(!("AudioContext"in e))throw"Sorry, not AudioContext.";x=o,w=n,t.initRecognition(i)},i.reproduce=function(e,n){p.lang=n||(x&&x.lang?x.lang:"en-US"),p.text=e,speechSynthesis.speak(p)},i.stopWatch=function(){if(!("webkitSpeechRecognition"in e))throw"Sorry, this feature is only for Google Chrome.";void 0!=r&&(x=void 0,w=void 0,m=!1,h=!1,r.stop()),void 0!=u&&(u.getAudioTracks().forEach(function(e){e.stop()}),u.getTracks().forEach(function(e){e.stop()}),u.stop&&u.stop()),null!=f&&e.cancelAnimationFrame(f),u=void 0},i.addWord=function(e){if(!e||"string"!=typeof e&&"object"!=("undefined"==typeof e?"undefined":o(e)))throw"Please, check your word.";"string"==typeof e&&L.push(e),"object"==("undefined"==typeof e?"undefined":o(e))&&(L=L.concat(e))},i.addCommand=function(e,n,t,o){if(F.filter(function(n){return n.key==e}).length>0)throw"A command with this key already exists";if(!e||"string"!=typeof e||!n||"function"!=typeof n)throw"Please enter a phrase and one function.";void 0!=t&&"boolean"==typeof t||(t=!0),void 0!=o&&"boolean"==typeof o||(o=!1),F.push({key:e,callback:n,close:t,watchStart:o})},i.addCommandStartingWith=function(e,n,t){i.addCommand(e,n,t,!0)},this.updateAnalysers=function(){if(h){var n=new Uint8Array(d.frequencyBinCount);d.getByteFrequencyData(n);for(var o=d.frequencyBinCount/10,i=0;i<10;++i){for(var a=0,r=Math.floor(i*o),s=0;s<o;s++)a+=n[r+s];a/=o,4==i&&(h?v.style.boxShadow="0px 0px 13px "+Math.round(a-5)+"px #ddd":v.style.boxShadow="0px 0px 13px 0px #ddd")}}f=e.requestAnimationFrame(t.updateAnalysers)},this.stream=function(e){u=e,s=a.createGain(),c=a.createMediaStreamSource(e),l=c,l.connect(s),d=a.createAnalyser(),d.fftSize=2048,s.connect(d),t.updateAnalysers()},this.initRecognition=function(e){x&&angular.extend(r,x),m=!0,void 0==u&&navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},t.stream,function(e){throw"Please, check your microphone."}),r.start(),i.oninit&&"function"==typeof i.oninit&&i.oninit(),e&&i.startListening()},i.similarText=function(e,n,t){if(null===e||null===n||"undefined"==typeof e||"undefined"==typeof n)return 0;e+="",n+="";var o,a,r,s,c=0,l=0,d=0,u=e.length,f=n.length;for(o=0;o<u;o++)for(a=0;a<f;a++){for(r=0;o+r<u&&a+r<f&&e.charAt(o+r)===n.charAt(a+r);r++);r>d&&(d=r,c=o,l=a)}return s=d,s&&(c&&l&&(s+=i.similarText(e.substr(0,c),n.substr(0,l))),c+d<u&&l+d<f&&(s+=i.similarText(e.substr(c+d,u-c-d),n.substr(l+d,f-l-d)))),t?200*s/(u+f):s},i}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=t,t.$inject=["$window","$timeout"]}]);